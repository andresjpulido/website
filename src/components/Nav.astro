---
import HeaderLink from "./HeaderLink.astro";
import LogoIcon from "./logoIcon.astro";
---

<Fragment>
  <!-- desktop -->
  <nav class="hidden md:block sticky top-0 bg-one z-10">
    <header class="flex flex-row items-center justify-between px-16 py-2">
      <LogoIcon />
      <ul class="unset flex gap-4 [&>li]:p-0 justify-end" data-attr="nav">
        <li>
          <HeaderLink href="#home" class="text-seven font-black"
            >Home</HeaderLink
          >
        </li>
        <li>
          <HeaderLink href="#projects" class="text-nine">Work</HeaderLink>
        </li>
        <li>
          <HeaderLink href="/#aboutme" class="text-nine">About Me</HeaderLink>
        </li>
      </ul>
    </header>
  </nav>
  <!-- mobile -->
  <nav class="md:hidden sticky top-0 bg-one pl-2">
    <div class="flex justify-between items-center">
      <svg
        version="1.0"
        xmlns="http://www.w3.org/2000/svg"
        class="w-8 h-8 fill-three rounded-full"
        viewBox="0 0 123.000000 123.000000"
        preserveAspectRatio="xMidYMid meet"
      >
        <g
          transform="translate(0.000000,123.000000) scale(0.100000,-0.100000)"
          stroke="none"
        >
          <path
            id="bg1"
            d="M0 615 l0 -615 615 0 615 0 0 615 0 615 -615 0 -615 0 0 -615z m538
223 c7 -7 12 -34 12 -61 0 -38 6 -56 25 -79 22 -26 25 -39 25 -112 0 -50 -5
-87 -12 -94 -17 -17 -279 -17 -296 0 -16 16 -16 170 0 186 8 8 47 12 110 12
l98 0 0 55 0 55 -85 0 -85 0 0 -30 c0 -25 -4 -30 -25 -30 -23 0 -25 4 -25 43
0 24 5 48 12 55 17 17 229 17 246 0z m420 0 c17 -17 17 -329 0 -346 -8 -8 -53
-12 -135 -12 l-123 0 0 -80 c0 -79 0 -80 -25 -80 l-25 0 0 253 c0 183 3 256
12 265 17 17 279 17 296 0z"
          ></path>
          <path
            id="bg2"
            d="M390 585 l0 -55 55 0 55 0 0 55 0 55 -55 0 -55 0 0 -55z"></path>
          <path
            id="bg3"
            d="M760 762 c0 -28 7 -45 25 -62 22 -21 25 -32 25 -97 l0 -73 55 0 55 0
0 135 0 135 -80 0 -80 0 0 -38z"
          ></path>
        </g>
      </svg>

      <button
        id="menu-button"
        class="button-three"
        aria-controls="primary-navigation"
        aria-expanded="false"
      >
        <svg
          class="bg-one fill-one stroke-three hamburger"
          viewBox="-10 -10 120 120"
          width="64"
        >
          <path
            class="line"
            stroke-width="10"
            stroke-linecap="round"
            stroke-linejoin="round"
            d="m 20 40 h 60 a 1 1 0 0 1 0 20 h -60 a 1 1 0 0 1 0 -40 h 30 v 70"
          >
          </path>
        </svg>
      </button>
    </div>

    <!-- menu mobile -->
    <section
      id="mobile-menu"
      class="hide-menu fixed top-[64px] left-0 z-50 w-full h-full transition-transform bg-black/75 border-primary-blue"
    >
      <div class="bg-one w-[75%] h-full drop-shadow-2xl text-nine">
        <ul
          class="unset flex flex-col justify-center text-text-bold gap-4 [&>li]:p-1 px-6"
        >
          <li><HeaderLink href="/">Home</HeaderLink></li>
          <li><HeaderLink href="#projects">Work</HeaderLink></li>
          <li><HeaderLink href="#aboutme">About Me</HeaderLink></li>
        </ul>
      </div>
    </section>
  </nav>
</Fragment>

<script>
  // @ts-nocheck

  document.querySelector("#menu-button").addEventListener("click", () => {
    const currentState = document
      .querySelector("#menu-button")
      .getAttribute("data-state");
    if (!currentState || currentState === "closed") {
      document
        .querySelector("#menu-button")
        .setAttribute("data-state", "opened");
      document
        .querySelector("#menu-button")
        .setAttribute("aria-expanded", "true");

      const menuElem = document.querySelector("#mobile-menu");
      menuElem.classList.remove("hide-menu");
      menuElem.classList.add("show-menu");
      document.body.style.overflow = "hidden";
    } else {
      document
        .querySelector("#menu-button")
        .setAttribute("data-state", "closed");
      document
        .querySelector("#menu-button")
        .setAttribute("aria-expanded", "false");

      const menuElem = document.querySelector("#mobile-menu");
      menuElem.classList.remove("show-menu");
      menuElem.classList.add("hide-menu");
      document.body.style.overflow = "auto";
    }
  });
</script>

<style>
  .hide-menu {
    transform: translateX(-100%);
  }
  .show-menu {
    transform: translateX(0%);
  }

  .button-three {
    --button-color: black;
    overflow: hidden;
  }

  .button-three .hamburger {
    transition:
      translate 1s,
      rotate 1s;
  }

  .button-three[aria-expanded="true"] .hamburger {
    translate: 10px -10px;
    rotate: 0.125turn;
  }

  .button-three .line {
    transition: 1s;
    stroke-dasharray: 60 31 60 300;
  }

  .button-three[aria-expanded="true"] .line {
    stroke-dasharray: 60 105 60 300;
    stroke-dashoffset: -90;
  }
</style>
